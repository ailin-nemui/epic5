EPIC4 Projects, Bugs, and other Errata:

KNOWN ERRATA (eg, bugs, or unresolved requests):
------------------------------------------------
* A missing 'else' in create_additional_screen causes gnu screen to be
  prefered over X windows.  Should this be fixed, or at least made an option?
  Maybe try X, fall back to gnu screen on failure?
* Should /set beep off suppress stripping of beeps?
* Allegedly 464 numeric shouldn't force a reconnect if we're registered.
* The mangler might expand things more than 3 times -- possible
  interference from the attribute parser?  caused by many ^v's.
* Add /timer -delete_for_window or something to avoid window switch warnings?
* After calling connectory(), try to output meaningful error messages, not 
  just blindly calling my_strerror(errno).
* scrollback/scrollforward/scrollend should be controlled by /window verbs
  and not solely by keybindings.
* /TYPE honors keybindings, and calls edit_char(), but /XTYPE -L does not 
  honor key bindings because it calls input_add_character().
* /DEFER needs to be server-specific.
* The check for "sun_len" in <sys/un.h> is bogus and unnecessary since we
  can just use #ifdef HAVE_SA_LEN for that.
* Input cursor wigs out if 2ndary window is < 32 columns wide...
* ^C,,, eats up all commas, not just the first one.
* Join #foo, then join #foobar, doesn't WHO for #foobar (maxxx)
* Built in functions need to call 'parse_server_index'!
* Study update_input() and update_all_windows() and determine if used properly
* Change AC_ARG_WITH(ipv6, to AC_ARG_USING(ipv6,
<larne> AC_ARG_ENABLE(protocols, 
<larne> [  --enable-protocols=protocol[[,protocol...]] Select which protocols
+to support [[default: all]].], 
<larne> [ protocols=$enableval ], 
<larne> [ protocols=$defaultprots ]) 
* DCC send yourself a file and then DCC get it leads to wackiness
* New function, you give it a window level, it gives you the window refnum
* IPV6-over-dcc, i promised morty i would.
* ON WHO hook not thrown in correct window.
* Shall remove_trailing_spaces honor a \ before a space trailing?
* get_window() should use get_window_by_desc() and not its own thing
* Larne's "missing line" bug.
* The "Select() failed" bug
* $glob() and $globi() tend to choke on wierdly named filenames, or rather, on
  wierd masks.
* msg from drogoh!~drogoh@216.249.173.230: ./Data/popups.ini:n288=..Send
  Flood:/timer 30 1 /raw -q privmsg $$1 :DCC SEND %logo 3353362454 20
  $rand(200,1999)  | echo 10 Send flooding $$1 for next 30 secs 
* $isnumber() will cause internal damage to the client when fed numbers that
  are too large for some unknown reason.

[See http://www.epicsol.org/PROJECTS for things to come in the future]
[See http://www.epicsol.org/CHANGELOG for things that changed in the past]

THE CHANGELOG SINCE THE LAST RELEASE:
-------------------------------------
* Fix $getset() by using the correct variable to do the lookup. :P
* Fix build error on non-SSL systems.
* Fix another build error on non-SSL systems.
* Fix all the rest of the build errors now that I am able to.
* Add support for channel mode +C at request of quakenet user.
* Allow /redirect =<num> as well as /redirect =<nick> for dcc raw connections
* Allow /redirect to use $* if it's available.
* Fix $xdebug() to accept wildcard patterns.
* Allow /exec -line et al to be changed in already running processes.
* next_in_comma_list converted to next_in_div_list, div argument added.
* Add /SET FLOATING_POINT_PRECISION, defaults to 6
* Change /SET FLOATING_POINT_PRECISION default to 16
* Add arg to next_args and new_next args to get a certain number of words
* Rewrite /alias xxx (args) handling to use next_args_count and not extractw.
* Tuned the call.xtrace alias in debug.irc.
* Extended $is_on() in guh to allow and return multiple arguments.
* Added $is_off() as a compliment to $is_on().
* Don't count first incoming line as part of the flood when calcing rate.
* Add -l<tcl> to the front of $LIBS so -lm can come after it
* Look for SSL stuff in default location before hunting for it in /usr/local.
* Reset $withval after check for perl so --without-perl doesn't --without-tcl
* Make first arg of cvtchar() a (const char *) to silence warning.
* Move 'this_sucks' label to a place where it is legal.
* Make check_val() cope with NaNs and INFs more graciously...
* Fix null deref with /lastlog -c
* Update the input line in set_update(), not the caller
* Do update the input line when redrawing status
* Change make_status() to return a success/failure value.
* Don't clear the "status line wants redraw" flag if redrawing status fails.
* Nuke the now unecessary "in_window_command" global variable.
* Fix bug where <scrollback> + <scrollforward> left you in scrollback mode.
* Force init of Window->lines_held = 0 even though that shouldnt be needed.
* Fix $timerctl() so it actually works (REFNUM/DELETE/GET/SET were broken)
* Fix /TIMER -UPDATE so it doesn't reset events to -1 automatically.
* Fix panic when you /server over from and to a connected server with chans
* Add %{1}R status format, which always gives you the window's refnum.
* Updated /redirect usage to reflect features it always had.
* Removed size limitations on enquote_it().  This fixes $read().
* Fix 'man' script.
* Fix /set help_pager off so that it can be used.
* Fix status_does_expandos code so it sets from_server to window's server.
* Const correctness improvements.
* Invert the meaning of 'new_check_flooding' to return TRUE if flooding.
* Revamp funny.c, /list, /names, /mode reply handling.
* Remove unused joined_nick, public_nick
* Change got_initial_version_28() arguments singly and not an array
* Change signature of protocol handling to take "command" as an argument
* The above change cascades to a lot of other changes.
* Allow the /msg'ing of @W<refnum> to msg a window's refnum.
* First round of larnification (Protection against unexpected server data)
* This involved substantial rewrites of parse.c, and numbers.c
* Now "fake" stuff goes through /on odd_server_stuff.
* Fix /on invite so it takes 3 arguments, not 2.
* Fix targets not being assigned correctly for privmsgs to user.
* Send output of who replies to LOG_CRAP as per previous behavior.
* Fix /on 368 so it is hooked properly
* Call expand_twiddle() and not normalize_filename in $glob[i](). (rb wd)
* Fix bug where epic would crash if you try ssl on non-ssl server (wd)
* Fix so that stack push set can unset values (thanks to Tyrak).
* Fix panic when doing stack push set with an empty set stack or 
  stack pop set with a set stack containing items (thanks to Tyrak).
* Fixed ERROR hook to display a star when not connected to a server.
* Tuned internal array consistency checking in regression tests.
* Added some debugging notices to autoget to warn of common problems.
* Rewrite $serverctl() so it matches verbs in a different way.
* Add $serverctl(gmatch *pattern*), $serverctl(imatch *pattern*)
* Add $serverctl(omatch *pattern*), remove $serverctl(match|pmatch *pattern*)
* Add $serverctl(max), returns maximum server refnum.
* Change $afterw()/$beforew()/$fromw()/$tow() to use $findw() and not $rmatch()
* Fix $writeb() so it dequotes data, so you can write binary data.
* Fix /sleep so it takes same arguments as /usleep.
* Uniformly use 32 bit file sizes in dcc.  That's the way it has to be.
* Split process_incoming_chat into modular functions.  It's an experiment.
* Remove the old, #if 0'd dcc_getfile_resume.
* Remove the second, redundant warning from /window refnum(_or_swap).
* Make the ArgList portion of server messages const.  All const!  Huzzah!
* Roll /names, /list, and /mode numeric handlers into numbers.c
* Roll "funny" global variables into server-specific variables
* Nuke funny.c and funny.h -- huzzah!
* /on window_kill provides two args now, $0 is refnum, $1 is name/refnum.
* Rename "numeric_banner" to "banner"
* Rename "parse_notice" to "p_notice"
* In /xecho, rename 'banner' local var to 'want_banner'.
* Revamp p_notice to look like and act like p_privmsg as much as possible.
* Finish the rest of the larnifications.  Done with phase 1.  Huzzah!
* Fixes for NAMES processing, found by paladin (ce)
* Fixes for configure to do deeper searching for perl (ce)
* Fix /on 311, /on 312. /on 317, /on 353, and /on names.
* Split NOTIFY stuff off into its own timer
* Add #define MINIMUM_NOTIFY_INTERVAL in config.h
* Add set_notify_interval, force that /SET NOTIFY_INTERVAL >= MIN_NOT_INT
* Fix default /on 321 output so it doesn't call display_msg.  BAH!
* Add $logctl(REFNUMS [ACTIVE|INACTIVE|ALL]), return all log refnums, for wd.
* Add an "activity timer" to logfiles to indicate last time written to.
* Add /LOG <refnum> ACTIVITY which updates activity timer w/o writing to log.
* Add $logctl([GET|SET] <refnum> ACTIVITY) to get or set the activity timer. 
* Add new script, "suppressmotd" to implemenet /set suppress_server_motd
* Don't hook /on names twice in the normal case. (rb void)
* Revamp $timerctl() to handle its args like $serverctl() does now.
* Add a bunch of new functions in 'functions' script.  See UPDATES.
* Tentative change to $glob*() making them "dequote" the glob before looking
  for it.  This probably isn't a real answer.  I get the feeling that a new
  pair of functions that make just one search as keerf suggested is probably
  the answer.
* Set (and destroy) server->funny_match.  Fixes crash using /LIST.
* Fix numeric handlers for 313, 317.
* Docs say that $info(o) includes 'g' if $glob() is available.  Add it.
* Revamp $win(serv|size|chan|bound|level)() to use get_window_by_desc.
* Revamp $win(screen)() to use get_window_by_desc.
* Use get_window_by_refnum(0) and not 'current_window'
* Allow a \ to escape a space where spaces would be stripped.
* Above bug fixes things like switch ($foo) {(foo\  ) {...}} to work.
* Add handler for /on 330, "user is logged in" numeric in ircu.
* Don't honor/ignore "#" in a window name/refnum.  This was lame anways.
* Fix is_window_visible/get_window to use get_window_by_desc().
* More conversions in functions.c to handle strings-to-winrefs.
* Add back support for $mychannels(#winref)
* Fix null deref with /LOG KILL
* Ignore KICKS based on the victim as well as the kicker.
* Don't clobber 'target' in /on general_notice; pass the original target.
* Altered the way the "word philosophy" is interpreted by new_next_args() and
  word_count().  This basically equates to two things..  Quoted words must be
  seperated by spaces, and the final quote must be present.  Stuff started
  breaking when I added the second one, so I #if'd it out.
* Fixed a leak with "/alias (args) {}".
* Fix bogus inverted flood check which broke flood checking.
* Add /set flood_ignore (on|off) 
* Found a good answer to $glob*()..  Giving them a null argument will now
  cause them to read the rest of the arg list as a single argument.
  eg, $glob(""  my "lovely" filename with spaces and quotes.jpg )
  (note the spaces at the beginning and end which are part of the filename)
* Turned a few extra options on in the $glob*() glob() call.  Now glob
  characters can be escaped by preceeding them with slashes, and brace chars
  can be used in this fashion:  file{1,2,33} matches file1, file2 and file33.
* Cleaned tabkey.ce up to deal with violently evil filenames more gracefully
  and the changes to the word philosophy and $glob().
* Added $open(), $read(), $write(), $close() regression tests.
* Tuned the autoget script to deal with url quoted dcc requests gracefully.
* Got rid of the reference to word_count() in /fe and /fec.
* Diked safe_new_next_arg() out and made it use new_next_arg() instead.
* Fixed problem that broke ctcp-over-dcc, reported by NSX.
* Fixed problem that broke unix socket detection, reported by Q_ (unconfirmed).
* Changed the default FLOOD_IGNORE setting to off.
* Fixed a bug in the commandqueues script.
* Altered 324 processing so that the hook is called when joining a channel.
* tabkey.ce alteratered to make input line modification smoother.
* Make sure to reset errno before calling strtod() in check_val().
  -- This bug, present from epic4-1.1.1 to commit 470, causes epic to 
     malfunction for a time and can be induced by a remote user.  Be careful.
* Ran "Valgrind" over epic which turned up a handful of potential bugs.
* Keep two sets of "interesting" fd's, a physical set and a logical set.
* This helps us keep track of ``held'' fd's more reasonably.
* More minor $dccctl() cleanups.
* Changed the log level for when a flood is triggered to CRAP.
* Fix $fsize(),$fexists() (for now) to take arg list as filename
* In future, will probably use $glob()s null arg trick for $fsize/fexists().
* Fix for an arbitrary select() loop yell from hop and nsx.
* Fix for a window bug from hop.
* More larnifications from rogue servers, reported by cras.
* Add extra slop for logically attributed denormalized display strings
* Const-ify a few Timevals, just for good measure.
* Don't hardcode use of AF_INET in dcc.c, rather use a global variable for it.
* Use "global_family" var to pass hint what socket fam to use.  AF_INET for now.
* Add extra sanity check just in case window->screen goes NULL in status redraw
* Fix several benign compile-time issues.
* Reorganize param list to dgets() to include a length argument
* Add (set|get)_server_line_length(), the maximum size of an irc protocol line.
* Convert dgets() callers to the new calling style.

